<?php

// DB接続設定
$db['host'] = "localhost";
$db['user'] = "root";
$db['pass'] = "";
$db['dbname'] = "web";
$db['port'] = ini_get("mysqli.default_port");
$db['sock'] =  "/tmp/mysql.sock";

//usage predicate: name = 'hogeo'
function selectFromUser($predicate)
{
    global $db;	
	$mysqli = new mysqli($db['host'], $db['user'], $db['pass'], $db['dbname']);
	//$mysqli = new mysqli($db['host'], $db['user'], $db['pass'], $db['dbname'], $db['port'], $db['sock']);

    $result;
    if ($predicate == "") 
    {
        $result = selectAll($mysqli);
    }
    else 
    {
        $result = selectUserWhereName($mysqli, $predicate);
    }
    
	$mysqli->close();
    return $result;
}

function selectAll($mysqli)
{  
    return $mysqli->query("SELECT * FROM user;");
}

function selectUserWhereName($mysqli, $predicate)
{
	return $mysqli->query("SELECT * FROM user WHERE " .$predicate .";");
}
?>